# AutoDNA - Automated DNA Laboratory System

AutoDNA is a comprehensive multi-component system designed for automated DNA and chemical experiments in laboratory environments. The system combines AI-powered protocol generation, web-based user interfaces, and hardware scheduling to create a complete end-to-end solution for molecular biology automation.

## üß¨ System Overview

AutoDNA consists of three main components working together to provide a seamless laboratory automation experience:

1. **UI** - Web-based frontend interface built on LobeChat framework
2. **AutoDNA-python** - AI-powered multi-agent system for protocol generation and execution
3. **Scheduler** - C++ scheduler for hardware coordination and workflow management

## üèóÔ∏è Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    HTTP/WebSocket    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    JSON Protocol    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       UI        ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ AutoDNA-python  ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ   Scheduler     ‚îÇ
‚îÇ   (Frontend)    ‚îÇ                      ‚îÇ   (AI Engine)   ‚îÇ                    ‚îÇ  (C++ Backend)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                                        ‚îÇ                                       ‚îÇ
         ‚îÇ                                        ‚îÇ                                       ‚îÇ
         ‚ñº                                        ‚ñº                                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   User Interface‚îÇ                      ‚îÇ   AI Agents     ‚îÇ                    ‚îÇ Laboratory      ‚îÇ
‚îÇ   - Workflow Mgmt‚îÇ                     ‚îÇ   - Protocol    ‚îÇ                    ‚îÇ Hardware        ‚îÇ
‚îÇ   - Monitoring  ‚îÇ                      ‚îÇ   - Literature  ‚îÇ                    ‚îÇ - Machines      ‚îÇ
‚îÇ   - ...         ‚îÇ                      ‚îÇ   - Code        ‚îÇ                    ‚îÇ - Instruments   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ   - ...         ‚îÇ                    ‚îÇ - Reagents      ‚îÇ
                                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ Quick Start

### Prerequisites

- **Operating System**: Recommended and tested exclusively on **Ubuntu 22.04**.
- **Node.js 18+** (for UI component)
- **pnpm 9.5+** (for UI component)
- **Python 3.9+** (for AutoDNA-python)
- **C++17 compatible compiler** (for Scheduler)
- **CMake 3.5+** (for building Scheduler)
- **Google Gemini API key** (for AI functionality)

Refer to the README files in submodules for more dependency information.

### Installation
> **Note**: The entire installation process is expected to take approximately one hour.

#### 1. Clone the Repository
```bash
git clone <repository-url>
```

#### 2. Setup UI Component
```bash
cd UI
pnpm install
```

#### 3. Setup AutoDNA-python Component
```bash
cd AutoDNA-python
pip install -r requirements.txt
export GEMINI_API_KEY="your-gemini-api-key"
```

#### 4. Setup Scheduler Component
**Note**: Strongly recommend to run the project on a Linux environment. Not guaranteed to work on other OSes.
```bash
cd Scheduler
mkdir build && cd build
cmake ..
make
```
### Configuration

#### Environment Variables

```bash
# Required for AutoDNA-python
export GEMINI_API_KEY="your-gemini-api-key"
```

#### Scheduler Configuration

The scheduler requires JSON configuration files in the `Scheduler/config/` directory:

- `reagents.json` - Reagent definitions and allocations
- `protocol_flow.json` - Protocol execution steps (automatically generated by AutoDNA-python, no need to edit manually)

#### AutoDNA-python Configuration

Refer to the README file in `AutoDNA-python/` for detailed configuration options.

### Running the System

#### Start the Components (in separate terminals)

1. **Start the Modbus server** (Terminal 1):
```bash
cd Scheduler/build
./bin/main_server
```
This step is for running without real hardware. If you have real hardware, you can skip this step.

2. **Start the Scheduler** (Terminal 2):
```bash
cd Scheduler/build
./bin/main_local_web ../config
```

3. **Start AutoDNA-python** (Terminal 3):
```bash
cd AutoDNA-python/scientist
python server.py
```

4. **Start the UI** (Terminal 4):
```bash
cd UI
pnpm dev
```

Check the README in submodules for additional running instructions.

#### Default Access Points
- **UI Interface**: http://localhost:3010
- **AutoDNA API**: http://localhost:8081
- **Scheduler WebSocket**: http://localhost:8080



## üß™ Example Workflows
> **Note**: The runtime for generating a protocol for an example prompt is approximately **15 minutes to an hour**, before any hardware execution begins.

You can try the examples yourself via either the UI or CLI.
#### Through UI
To run an example, select a prompt from the `AutoDNA-python/scientist/prompts/` folder, paste it into the UI, and click the "Send" button to start. You may still be required to input something occasionally in the CLI. If you are still confused, please refer to the [README](./AutoDNA-python/README.md) in `AutoDNA-python/` for detailed usage.

#### Through CLI:
Refer to the [README](./AutoDNA-python/README.md) in `AutoDNA-python/` for detailed CLI usage.


## üìä Output and Results

The system generates comprehensive outputs:

- **Protocols**: Detailed step-by-step experimental procedures
- **Generated Code**: Executable Python code for laboratory automation
- **Reagent Lists**: Required reagents with availability status
- **Hardware Commands**: Equipment-specific instructions
- **Literature References**: Relevant scientific papers
- **Execution Logs**: Detailed logs of agent interactions

Results are saved in structured formats with intelligent caching for efficient re-execution.

## üìã Component Details

### üîß UI Component

The frontend provides an intuitive web interface for managing laboratory workflows.

**Key Features:**
- Multi-agent workflow orchestration
- Real-time status monitoring
- Interactive protocol design
- Result visualization and comparison

**Technology Stack:**
- Built on LobeChat framework
- React/Next.js frontend
- WebSocket communication
- Custom workflow routing system

### ü§ñ AutoDNA-python Component

The AI engine that powers intelligent protocol generation and execution.

**Key Features:**
- Multi-agent AI system with specialized agents
- Literature search and analysis
- Protocol design and optimization
- Code generation for laboratory automation

**AI Agents:**
- **Literature Agent**: Scientific literature search and analysis
- **Protocol Agent**: Experimental protocol design
- **Reagent Agent**: Reagent inventory management
- **Code Agent**: Python code generation for automation
- **Hardware Agent**: Laboratory equipment interface
- **Hypothesis Agent**: Experimental hypothesis formulation

**Supported Experiment Types:**
- DNA Synthesis
- RPA-based Nucleic Acid Tests
- RNA Experiments
- DNA storage write operation
- DNA storage read operation
- PolyA Tailing
- And more...


### ‚öôÔ∏è Scheduler Component

The C++ backend that manages laboratory hardware and workflow execution.

**Key Features:**
- Hardware coordination and scheduling
- Reagent allocation and management
- Real-time workflow monitoring
- WebSocket communication
- Modbus protocol support

**Supported Hardware:**
- Fluorescence readers
- PCR machines
- Liquid handling systems
- Temperature controllers
- Various laboratory instruments


## üõ†Ô∏è Troubleshooting

### Common Issues

1. **Connection Issues**: Ensure all components are running and ports are available
2. **API Key**: Verify GEMINI_API_KEY is set correctly
3. **Dependencies**: Check that all required libraries are installed
4. **Configuration**: Verify config files are present and properly formatted
5. **Clear output**: Delete previous output folders when running new experiments


## üìÑ License

This project is licensed under the terms specified in the LICENSE file.

## üî¨ Scientific Applications

AutoDNA is designed for:

- **Research Laboratories**: Automated protocol design and execution
- **Biotechnology Companies**: Streamlined experimental workflows
- **Educational Institutions**: Teaching molecular biology concepts
- **Diagnostic Labs**: Rapid assay development and testing
- **Synthetic Biology**: Automated DNA synthesis and manipulation

---

**Note**: This system is designed for research and educational purposes. Always follow proper laboratory safety protocols and regulations when using automated systems.
